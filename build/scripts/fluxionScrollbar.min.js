var fluxionScrollbar=function(a){var b,c,d,e,f,g,h,i=null,j=null,k=$(a),l=function(){k.css("-moz-user-select","none"),k.css("-webkit-user-select","none"),k.attr("onselectstart","return false;");var a=k.html();k.html('<div class="fluxionScrollParent"><div class="fluxionScrollContainer">'+a+'</div><div class="fluxionScrollControls"><div class="fluxionScrollHandleContainer"><div class="fluxionScrollHandle"><div class="fluxionScrollHandleBar"></div></div><div class="fluxionScrollHandleTrack"></div></div></div></div>'),b=k.find(".fluxionScrollParent"),c=k.find(".fluxionScrollContainer"),d=k.find(".fluxionScrollControls"),e=k.find(".fluxionScrollHandle"),f=k.find(".fluxionScrollHandle"),g=k.find(".fluxionScrollHandleBar"),h=k.find(".fluxionScrollHandleTrack")},m=function(){l(),o(),n()},n=function(){var a=k.height(),b=c.height();a>b?d.hide():d.show();var e=a/b,g=h.height(),i=e*g;f.css("height",i)},o=function(){c.bind("mousedown",function(a){i=a.clientY}),c.bind("mousemove",function(a){i&&(r(i-a.clientY),i=a.clientY)}),c.bind("mouseout mouseup",function(){i=null}),f.bind("mousedown",function(a){j=a.clientY}),b.bind("mousemove",function(a){var b=-(j-a.clientY),c=b*s();j&&(r(c),j=a.clientY)}),b.bind("mouseout mouseup",function(){j=null})},p=function(a,b,c){var d=b||parseInt,e=d(a);return isNaN(e)?c:e},q=function(a,b){return p(a,b,0)},r=function(a){{var d=c.css("top"),e=c.height(),f=b.height(),h="auto"==d?0:parseInt(d),i=h-a,j=g.css("top");q(j)}i>0?i=0:-1*i>e-f&&(i=-(e-f)),i!=h&&(t(i),u(-i/s()))},s=function(){var a=c.height(),d=b.height();return a/d},t=function(a){c.css("top",a)},u=function(a){f.css("top",a)},v=function(){t(0)};return{activate:m,update:n,pan:r,reset:v}};