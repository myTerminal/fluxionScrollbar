function fluxionScrollbar(a){function b(){20>p&&(p+=1),clearTimeout(l),l=setTimeout(function(){c()},100)}function c(){p>0&&(p-=1),p>1&&(l=setTimeout(function(){c()},100))}function d(){var b=parseInt(i($(a).find(".fluxionScrollContainer"))),c=parseInt(i($(a).find(".fluxionScrollParent")));return b/c}function e(){var b=parseInt(i($(a).find(".fluxionScrollContainer"))),c=parseInt(i($(a).find(".fluxionScrollParent")));return b-c}function f(){d()<=1?$(a).find(".fluxionScrollControls").hide():$(a).find(".fluxionScrollControls").show()}function g(){var b,c,e=d();f(),b=i($(a).find(".fluxionScrollHandleTrack")),c=b/e,$(a).find(".fluxionScrollHandle").css("height",c)}function h(){$(a).css("-moz-user-select","none"),$(a).css("-webkit-user-select","none"),$(a).attr("onselectstart","return false;");var b=$(a).html();$(a).html('<div class="fluxionScrollParent"><div class="fluxionScrollContainer">'+b+'</div><div class="fluxionScrollControls"><div class="fluxionScrollHandleContainer"><div class="fluxionScrollHandle"><div class="fluxionScrollHandleBar"></div></div><div class="fluxionScrollHandleTrack"></div></div></div></div>')}function i(a){if(j(a))return 0;var b=parseInt($(a).css("height"))+parseInt($(a).css("padding-top"))+parseInt($(a).css("margin-top"))+parseInt($(a).css("border-top-width"))+parseInt($(a).css("padding-bottom"))+parseInt($(a).css("margin-bottom"))+parseInt($(a).css("border-bottom-width"));return k(b)}function j(a){return"none"==$(a).css("display")?!0:!1}function k(a){return isNaN(a)?0:a}var l,m=this,n=!1,o=0,p=1;this.activate=function(){h(),$(a).live("mouseover",function(){m.performScroll(0),f()}),$(a).live("mousedown",function(a){n=!0,o=a.clientY}),$(a).live("mouseup mouseleave",function(){n=!1,$(this).removeClass("visible")}),$(a).live("mousemove",function(a){if(n){var b=o-a.clientY;m.performScroll(b),o=a.clientY}}),$(a).live("mousewheel",function(a,c){c=parseInt(a.handleObj.handler.arguments[3]),b(),m.performScroll(-1*p*c)}),$(a).find(".fluxionScrollControls").live("mousedown",function(a){n=!0,o=a.clientY}),$(a).find(".fluxionScrollControls").live("mouseup mouseleave",function(){n=!1,$(a).removeClass("visible")}),$(a).find(".fluxionScrollControls").live("mousemove",function(a){if(n){var b=o-a.clientY;m.performScroll(-1*d()*b),o=a.clientY}}),g()},this.resetToZero=function(){$(a).find(".fluxionScrollContainer").css("top","0px"),$(a).find(".fluxionScrollHandle").css("top","0px"),g()},this.performScroll=function(b){var c,f,h,i=d(),j=e();1>=i||(c=parseFloat($(a).find(".fluxionScrollContainer").css("top")),f=c-b,h=-1*f/i,f>0&&(f=0),-1*f>j&&(f=-1*j),$(a).find(".fluxionScrollContainer").css("top",f),$(a).find(".fluxionScrollHandle").css("top",h),g())}}